{"version":3,"sources":["redux/usersReducer.js","redux/authReducer.js","redux/appReducer.js","redux/filterReducer.js","redux/sortReducer.js","middleware/axiosMiddleware.js","App.js","redux/rootReducer.js","components/hoc/AuthLayout/AuthLayout.js","components/LoginForm.js","pages/Login.js","components/hoc/UsersLayout/UsersLayout.js","index.js","redux/types.js","services/users.js","services/auth.js","redux/actions.js"],"names":["initialState","users","usersReducer","state","action","type","FETCH_USERS","payload","token","localStorage","getItem","authReducer","SET_AUTH_TOKEN","setItem","loading","alert","appReducer","SHOW_LOADER","HIDE_LOADER","SHOW_ALERT","HIDE_ALERT","filterReducer","SEARCH_USERNAME","sortType","ASC","sortReducer","SORT_USERNAME","axiosAuth","getState","next","authToken","axios","defaults","baseURL","process","headers","common","Accept","responseType","Authorization","App","history","className","to","AuthLayout","Container","Row","Col","xs","md","this","props","children","Component","schema","yup","shape","username","required","min","max","matches","password","mapDispatchToProps","setAuthToken","push","connect","app","validationSchema","initialValues","onSubmit","values","a","setSubmitting","handleSubmit","handleChange","handleBlur","touched","isValid","isSubmitting","errors","Form","noValidate","Alert","variant","Group","controlId","Label","Control","placeholder","name","value","onChange","onBlur","isInvalid","Feedback","Button","disabled","Card","border","Body","fluid","Navbar","bg","Brand","href","Users","React","lazy","then","NotFound","createBrowserHistory","store","createStore","combineReducers","router","connectRouter","filters","sortBy","compose","applyMiddleware","routerMiddleware","thunk","window","__REDUX_DEVTOOLS_EXTENSION__","render","StrictMode","exact","path","Login","fallback","document","getElementById","DESC","UserService","get","response","data","catch","error","console","message","AuthService","authCredentials","method","url","status","errorMsg","non_field_errors","userService","dispatch","authService","getAuthToken","authResponse","showAlert","setTimeout","hideAlert","fetchUsers","fetchAllUsers","hideLoader","text","filterUsername","sortUsernameBy"],"mappings":"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","file":"static/js/main.8e8ccb2b.chunk.js","sourcesContent":["import { FETCH_USERS, } from './types'\r\n\r\nconst initialState = {\r\n  users: []\r\n}\r\n\r\nexport const usersReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_USERS:\r\n      return { ...state, users: action.payload }\r\n    default: return state\r\n  }\r\n}\r\n","import { SET_AUTH_TOKEN } from './types'\r\n\r\nconst initialState = {\r\n  token: !!localStorage.getItem('auth_token') === true\r\n      ? localStorage.getItem('auth_token')\r\n      : ''\r\n}\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_AUTH_TOKEN:\r\n      return {\r\n        ...state,\r\n        token: localStorage.setItem('auth_token', action.payload)\r\n      }\r\n    default: return state\r\n  }\r\n}\r\n","import { HIDE_ALERT, HIDE_LOADER, SHOW_ALERT, SHOW_LOADER } from './types'\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  alert: null\r\n}\r\n\r\nexport const appReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SHOW_LOADER:\r\n      return { ...state, loading: true }\r\n    case HIDE_LOADER:\r\n      return { ...state, loading: false }\r\n    case SHOW_ALERT:\r\n      return { ...state, alert: action.payload }\r\n    case HIDE_ALERT:\r\n      return { ...state, alert: null }\r\n    default: return state\r\n  }\r\n}\r\n","import { SEARCH_USERNAME } from './types'\r\n\r\nconst initialState = ''\r\n\r\nexport const filterReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SEARCH_USERNAME:\r\n      return action.payload\r\n    default: return state\r\n  }\r\n}\r\n","import { ASC, SORT_USERNAME } from './types'\r\n\r\nconst initialState = {\r\n  sortType: ASC\r\n}\r\n\r\nexport const sortReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SORT_USERNAME:\r\n      return {\r\n        ...state,\r\n        sortType: action.sortType\r\n      }\r\n    default: return state\r\n  }\r\n}\r\n","import axios from 'axios'\r\n\r\nfunction createAxiosAuthMiddleware() {\r\n  return ({ getState }) => next => (action) => {\r\n    const { token } = getState().authToken;\r\n    axios.defaults.baseURL = process.env.REACT_APP_BASE_API_URL\r\n    axios.defaults.headers.common.Accept = 'application/json'\r\n    axios.defaults.responseType = 'json'\r\n    axios.defaults.headers.common.Authorization = token\r\n      ? `Token ${token}`\r\n      : null;\r\n\r\n    return next(action);\r\n  };\r\n}\r\n\r\nconst axiosAuth = createAxiosAuthMiddleware();\r\n\r\nexport default axiosAuth;\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction App ({ history }) {\r\n  return (\r\n    <>\r\n      <h1 className={\"text-center\"}>Это главная страница решённого тестового задания</h1>\r\n      <Link className=\"btn btn-primary\" to={\"/login\"}>Login in</Link>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { combineReducers } from 'redux'\r\nimport { connectRouter } from 'connected-react-router'\r\nimport { usersReducer } from './usersReducer'\r\nimport { authReducer } from './authReducer'\r\nimport { appReducer } from './appReducer'\r\nimport { filterReducer } from './filterReducer'\r\nimport { sortReducer } from './sortReducer'\r\n\r\nexport const rootReducer = (history) => combineReducers({\r\n  app: appReducer,\r\n  router: connectRouter(history),\r\n  authToken: authReducer,\r\n  users: usersReducer,\r\n  filters: filterReducer,\r\n  sortBy: sortReducer\r\n})\r\n","import React, { Component } from 'react'\r\nimport { Col, Container, Row } from 'react-bootstrap'\r\n\r\nexport default class AuthLayout extends Component {\r\n  render() {\r\n    return (\r\n      <Container className={\"h-100 mt-5\"}>\r\n        <Row className={\"align-items-center justify-content-center h-100\"}>\r\n          <Col xs={12} md={4}>\r\n            { this.props.children }\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap'\r\nimport { connect } from 'react-redux'\r\nimport { setAuthToken } from '../redux/actions'\r\nimport { push } from 'connected-react-router'\r\nimport { Formik } from 'formik'\r\nimport * as yup from 'yup'\r\n\r\nconst schema = yup.object().shape({\r\n  username: yup\r\n    .string()\r\n    .required(\"Is required\")\r\n    .min(1)\r\n    .max(150)\r\n    .matches(/^[\\w.@+-]+$/, \"Letters, digits and @/./+/-/_ only\"),\r\n  password: yup\r\n    .string()\r\n    .required(\"Is required\")\r\n    .min(1)\r\n    .max(128)\r\n    .matches(/^(?=.*[A-Z])(?=.*\\d).{8,}$/, \"Password should stated uppercase, contain digits\"),\r\n})\r\n\r\nconst LoginForm = (props) => {\r\n    return (\r\n      <Formik\r\n        validationSchema={schema}\r\n        initialValues={{\r\n          username: '',\r\n          password: ''\r\n        }}\r\n        onSubmit={async ( values, { setSubmitting }) => {\r\n          const status = props.setAuthToken(values)\r\n          if (status && props.token) {\r\n            props.push('/users')\r\n          }\r\n        }}\r\n      >\r\n        {({\r\n          handleSubmit,\r\n          handleChange,\r\n          handleBlur,\r\n          values,\r\n          touched,\r\n          isValid,\r\n          isSubmitting,\r\n          errors,\r\n        }) => (\r\n          <Form noValidate onSubmit={handleSubmit}>\r\n            {props.alert && <Alert variant={\"danger\"}>{props.alert}</Alert>}\r\n            <Form.Group controlId=\"username\">\r\n              <Form.Label>Username</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Enter username\"\r\n                name=\"username\"\r\n                value={values.username}\r\n                onChange={handleChange}\r\n                onBlur={handleBlur}\r\n                isValid={touched.username && !errors.username}\r\n                isInvalid={!!errors.username}\r\n              />\r\n              {isValid &&\r\n              <Form.Control.Feedback type={\"valid\"}>\r\n                Correct!\r\n              </Form.Control.Feedback>}\r\n              <Form.Control.Feedback type={\"invalid\"}>\r\n                { errors.username }\r\n              </Form.Control.Feedback>\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"password\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                placeholder=\"Enter password\"\r\n                name=\"password\"\r\n                value={values.password}\r\n                onChange={handleChange}\r\n                onBlur={handleBlur}\r\n                isValid={touched.password && !errors.password}\r\n                isInvalid={!!errors.password}\r\n              />\r\n              <Form.Control.Feedback type={\"valid\"}>\r\n                Correct!\r\n              </Form.Control.Feedback>\r\n              <Form.Control.Feedback type={\"invalid\"}>\r\n                { errors.password }\r\n              </Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Button\r\n              variant=\"primary\"\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n            >\r\n              Sign in\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setAuthToken,\r\n  push,\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  alert: state.app.alert,\r\n  token: state.authToken.token\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\r\n","import React from 'react'\r\nimport { Card } from 'react-bootstrap'\r\nimport LoginForm from '../components/LoginForm'\r\n\r\nexport default () => {\r\n  return (\r\n    <Card border={'primary'}>\r\n      <Card.Body>\r\n        <LoginForm/>\r\n      </Card.Body>\r\n    </Card>\r\n  )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Col, Container, Navbar, Row } from 'react-bootstrap'\r\n\r\nexport default class AuthLayout extends Component {\r\n  render() {\r\n    return (\r\n      <Container fluid>\r\n        <>\r\n          <Navbar bg=\"dark\" variant=\"dark\" className={\"mb-5\"}>\r\n            <Navbar.Brand href=\"#home\">Webim Test-case</Navbar.Brand>\r\n          </Navbar>\r\n        </>\r\n        <Row className={'align-items-center justify-content-center h-100'}>\r\n          <Col xs={12}>\r\n            { this.props.children }\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n","import React, { Suspense } from 'react'\r\nimport { render } from 'react-dom'\r\nimport { compose, createStore, applyMiddleware } from 'redux'\r\nimport { Provider } from 'react-redux'\r\nimport thunk from 'redux-thunk'\r\nimport { rootReducer } from './redux/rootReducer'\r\nimport { createBrowserHistory } from 'history'\r\nimport { ConnectedRouter, routerMiddleware } from 'connected-react-router'\r\nimport { Route, Switch } from 'react-router'\r\nimport axiosAuth from './middleware/axiosMiddleware'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport App from './App'\r\nimport AuthLayout from './components/hoc/AuthLayout/AuthLayout'\r\nimport Login from './pages/Login'\r\nimport UsersLayout from './components/hoc/UsersLayout/UsersLayout'\r\nconst Users = React.lazy(() => import ('./pages/Users').then())\r\nconst NotFound = React.lazy(() => import ('./pages/NotFound').then())\r\n\r\nexport const history = createBrowserHistory('/webim-test-case/')\r\n\r\nconst store = createStore(\r\n  rootReducer(history),\r\n  compose(\r\n    applyMiddleware(\r\n      routerMiddleware(history),\r\n      thunk,\r\n      axiosAuth\r\n    ),\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n  ))\r\n\r\nrender(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <ConnectedRouter history={history}>\r\n        <>\r\n          <Switch>\r\n            <Route exact path={'/'}>\r\n              <App />\r\n            </Route>\r\n            <Route exact path={'/login'}>\r\n              <AuthLayout>\r\n                <Login/>\r\n              </AuthLayout>\r\n            </Route>\r\n            <Route exact path={'/users'}>\r\n              <UsersLayout>\r\n                <Suspense fallback={<div>Loading..</div>}>\r\n                  <Users/>\r\n                </Suspense>\r\n              </UsersLayout>\r\n            </Route>\r\n            <Route path={\"*\"}>\r\n              <Suspense fallback={<div>Loading..</div>}><NotFound /></Suspense>\r\n            </Route>\r\n          </Switch>\r\n        </>\r\n      </ConnectedRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n)\r\n","export const FETCH_USERS = 'USER/FETCH_USERS'\r\nexport const SET_AUTH_TOKEN = 'AUTH/SET_AUTH_TOKEN'\r\nexport const SHOW_LOADER = 'APP/SHOW_LOADER'\r\nexport const HIDE_LOADER = 'APP/HIDE_LOADER'\r\nexport const SHOW_ALERT = 'APP/SHOW_ALERT'\r\nexport const HIDE_ALERT = 'APP/HIDE_ALERT'\r\nexport const SEARCH_USERNAME = 'FILTER/SEARCH_USERNAME'\r\nexport const SORT_USERNAME = 'SORT/SORT_USERNAME'\r\nexport const ASC = 'asc'\r\nexport const DESC = 'desc'\r\n","import axios from 'axios'\r\n\r\nexport default class UserService {\r\n\r\n  async fetchAllUsers () {\r\n    return await axios\r\n      .get('api/v1/users/')\r\n      .then((response) => {\r\n        return response.data\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message)\r\n      })\r\n  }\r\n}\r\n","import axios from 'axios'\r\n\r\nexport default class AuthService {\r\n  async getAuthToken (authCredentials) {\r\n    return await axios({\r\n      method: 'post',\r\n      url: 'api-token-auth/',\r\n      data: authCredentials,\r\n    })\r\n      .then((response) => {\r\n        return {\r\n          token: response.data.token,\r\n          status: response.status\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        return {\r\n          errorMsg: error.response.data.non_field_errors,\r\n          status: error.response.status\r\n        }\r\n      })\r\n  }\r\n}\r\n","import {\r\n  SET_AUTH_TOKEN,\r\n  FETCH_USERS,\r\n  HIDE_ALERT,\r\n  SHOW_LOADER,\r\n  HIDE_LOADER,\r\n  SHOW_ALERT,\r\n  SEARCH_USERNAME,\r\n  SORT_USERNAME,\r\n} from './types'\r\nimport UserService from '../services/users'\r\nimport AuthService from '../services/auth'\r\nimport { push } from 'connected-react-router'\r\nconst userService = new UserService()\r\n\r\nexport function setAuthToken (values) {\r\n  return async dispatch => {\r\n    try {\r\n      const authService = new AuthService()\r\n      const authResponse = await authService.getAuthToken(values)\r\n\r\n      if (authResponse.status === 200) {\r\n        dispatch({ type: SET_AUTH_TOKEN, payload: authResponse.token })\r\n      }\r\n\r\n      dispatch(showAlert(authResponse.errorMsg))\r\n      setTimeout(() => {\r\n        dispatch(hideAlert())\r\n      }, 3000)\r\n\r\n      return false\r\n\r\n    } catch (e) {\r\n      dispatch(showAlert(e.message))\r\n      setTimeout(() => {\r\n        dispatch(hideAlert())\r\n      }, 3000)\r\n    }\r\n  }\r\n}\r\n\r\nexport function fetchUsers () {\r\n  return async dispatch => {\r\n    try\r\n    {\r\n      dispatch(showLoader())\r\n      if (!!localStorage.getItem('auth_token')) {\r\n        const users = await userService.fetchAllUsers()\r\n        dispatch({ type: FETCH_USERS, payload: users })\r\n        dispatch(hideLoader())\r\n      } else {\r\n        dispatch(push('/login'))\r\n      }\r\n    } catch (e) {\r\n      dispatch(showAlert(e.message))\r\n      setTimeout(() => {\r\n        dispatch(hideAlert())\r\n      }, 300)\r\n      dispatch(hideLoader())\r\n    }\r\n  }\r\n}\r\n\r\nexport function showLoader () {\r\n  return {\r\n    type: SHOW_LOADER,\r\n  }\r\n}\r\n\r\nexport function hideLoader () {\r\n  return {\r\n    type: HIDE_LOADER,\r\n  }\r\n}\r\n\r\nexport function showAlert (text) {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: SHOW_ALERT,\r\n      payload: text,\r\n    })\r\n\r\n    setTimeout(() => {\r\n      dispatch(hideAlert())\r\n    }, 3000)\r\n  }\r\n}\r\n\r\nexport function hideAlert () {\r\n  return {\r\n    type: HIDE_ALERT,\r\n    payload: null,\r\n  }\r\n}\r\n\r\nexport function filterUsername (username) {\r\n  return {\r\n    type: SEARCH_USERNAME,\r\n    payload: username\r\n  }\r\n}\r\n\r\nexport function sortUsernameBy (sortType) {\r\n  return {\r\n    type: SORT_USERNAME,\r\n    sortType,\r\n  }\r\n}\r\n"],"sourceRoot":""}
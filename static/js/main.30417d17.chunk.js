(this["webpackJsonpwebim-test-case"]=this["webpackJsonpwebim-test-case"]||[]).push([[0],{118:function(e,t,n){e.exports=n(147)},147:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return ae}));var a=n(0),r=n.n(a),c=n(36),u=n(42),o=n(46),s=n(108),l=n(49),i=n(12),d=n(8),p={users:[]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.c:return Object(i.a)(Object(i.a)({},e),{},{users:t.payload});default:return e}},f={token:!0===!!localStorage.getItem("auth_token")?localStorage.getItem("auth_token"):""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.g:return Object(i.a)(Object(i.a)({},e),{},{token:localStorage.setItem("auth_token",t.payload)});default:return e}},b={loading:!1,alert:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.i:return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case d.e:return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case d.h:return Object(i.a)(Object(i.a)({},e),{},{alert:t.payload});case d.d:return Object(i.a)(Object(i.a)({},e),{},{alert:null});default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.f:return t.payload;default:return e}},y={sortType:d.a},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.j:return Object(i.a)(Object(i.a)({},e),{},{sortType:t.sortType});default:return e}},O=n(19),j=n(106),k=n(5),w=n(30),T=n.n(w);var S=function(e){var t=e.getState;return function(e){return function(n){var a=t().authToken.token;return T.a.defaults.baseURL="https://emphasoft-test-assignment.herokuapp.com/",T.a.defaults.headers.common.Accept="application/json",T.a.defaults.responseType="json",T.a.defaults.headers.common.Authorization=a?"Token ".concat(a):null,e(n)}}},_=(n(143),n(109));var x,A=function(e){return e.history,r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center"},"\u042d\u0442\u043e \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0448\u0451\u043d\u043d\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u0434\u0430\u043d\u0438\u044f"),r.a.createElement(_.a,{className:"btn btn-primary",to:"/login"},"Login in"))},I=n(34),C=n(35),R=n(68),L=n(67),N=n(149),U=n(150),P=n(110),F=function(e){Object(R.a)(n,e);var t=Object(L.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){return r.a.createElement(N.a,{className:"h-100 mt-5"},r.a.createElement(U.a,{className:"align-items-center justify-content-center h-100"},r.a.createElement(P.a,{xs:12,md:4},this.props.children)))}}]),n}(a.Component),D=n(155),H=n(18),B=n.n(H),V=n(29),M=n(152),q=n(154),X=n(151),z=n(95),W=n(14),G=n(116),J=n(85),$=J.a().shape({username:J.b().required("Is required").min(1).max(150).matches(/^[\w.@+-]+$/,"Letters, digits and @/./+/-/_ only"),password:J.b().required("Is required").min(1).max(128).matches(/^(?=.*[A-Z])(?=.*\d).{8,}$/,"Password should stated uppercase, contain digits")}),K={setAuthToken:z.c,push:W.d},Z=Object(o.c)((function(e){return{alert:e.app.alert,token:e.authToken.token}}),K)((function(e){return r.a.createElement(G.a,{validationSchema:$,initialValues:{username:"",password:""},onSubmit:function(){var t=Object(V.a)(B.a.mark((function t(n,a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.setSubmitting,e.setAuthToken(n)&&e.token&&e.push("/users");case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},(function(t){var n=t.handleSubmit,a=t.handleChange,c=t.handleBlur,u=t.values,o=t.touched,s=t.isValid,l=t.isSubmitting,i=t.errors;return r.a.createElement(M.a,{noValidate:!0,onSubmit:n},e.alert&&r.a.createElement(q.a,{variant:"danger"},e.alert),r.a.createElement(M.a.Group,{controlId:"username"},r.a.createElement(M.a.Label,null,"Username"),r.a.createElement(M.a.Control,{type:"text",placeholder:"Enter username",name:"username",value:u.username,onChange:a,onBlur:c,isValid:o.username&&!i.username,isInvalid:!!i.username}),s&&r.a.createElement(M.a.Control.Feedback,{type:"valid"},"Correct!"),r.a.createElement(M.a.Control.Feedback,{type:"invalid"},i.username)),r.a.createElement(M.a.Group,{controlId:"password"},r.a.createElement(M.a.Label,null,"Password"),r.a.createElement(M.a.Control,{type:"password",placeholder:"Enter password",name:"password",value:u.password,onChange:a,onBlur:c,isValid:o.password&&!i.password,isInvalid:!!i.password}),r.a.createElement(M.a.Control.Feedback,{type:"valid"},"Correct!"),r.a.createElement(M.a.Control.Feedback,{type:"invalid"},i.password)),r.a.createElement(X.a,{variant:"primary",type:"submit",disabled:l},"Sign in"))}))})),Q=function(){return r.a.createElement(D.a,{border:"primary"},r.a.createElement(D.a.Body,null,r.a.createElement(Z,null)))},Y=n(153),ee=function(e){Object(R.a)(n,e);var t=Object(L.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){return r.a.createElement(N.a,{fluid:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{bg:"dark",variant:"dark",className:"mb-5"},r.a.createElement(Y.a.Brand,{href:"#home"},"Webim Test-case"))),r.a.createElement(U.a,{className:"align-items-center justify-content-center h-100"},r.a.createElement(P.a,{xs:12},this.props.children)))}}]),n}(a.Component),te=r.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,166)).then()})),ne=r.a.lazy((function(){return n.e(5).then(n.bind(null,165)).then()})),ae=Object(O.a)(),re=Object(u.e)((x=ae,Object(u.c)({app:E,router:Object(l.b)(x),authToken:h,users:m,filters:v,sortBy:g})),Object(u.d)(Object(u.a)(Object(j.a)(ae),s.a,S),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Object(c.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:re},r.a.createElement(l.a,{history:ae},r.a.createElement(r.a.Fragment,null,r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/"},r.a.createElement(A,null)),r.a.createElement(k.a,{exact:!0,path:"/login"},r.a.createElement(F,null,r.a.createElement(Q,null))),r.a.createElement(k.a,{exact:!0,path:"/users"},r.a.createElement(ee,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading..")},r.a.createElement(te,null)))),r.a.createElement(k.a,{path:"*"},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading..")},r.a.createElement(ne,null)))))))),document.getElementById("root"))},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"i",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"h",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"j",(function(){return i})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var a="USER/FETCH_USERS",r="AUTH/SET_AUTH_TOKEN",c="APP/SHOW_LOADER",u="APP/HIDE_LOADER",o="APP/SHOW_ALERT",s="APP/HIDE_ALERT",l="FILTER/SEARCH_USERNAME",i="SORT/SORT_USERNAME",d="asc",p="desc"},95:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return O}));var a=n(18),r=n.n(a),c=n(29),u=n(8),o=n(34),s=n(35),l=n(30),i=n.n(l),d=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"fetchAllUsers",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("api/v1/users/").then((function(e){return e.data})).catch((function(e){console.error(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),p=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAuthToken",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"post",url:"api-token-auth/",data:t}).then((function(e){return{token:e.data.token,status:e.status}})).catch((function(e){return{errorMsg:e.response.data.non_field_errors,status:e.response.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),m=n(14),f=new d;function h(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new p,t.next=4,a.getAuthToken(e);case 4:return 200===(c=t.sent).status&&n({type:u.g,payload:c.token}),n(v(c.errorMsg)),setTimeout((function(){n(y())}),3e3),t.abrupt("return",!1);case 11:t.prev=11,t.t0=t.catch(0),n(v(t.t0.message)),setTimeout((function(){n(y())}),3e3);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}function b(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:u.i}),!localStorage.getItem("auth_token")){e.next=10;break}return e.next=5,f.fetchAllUsers();case 5:n=e.sent,t({type:u.c,payload:n}),t(E()),e.next=11;break;case 10:t(Object(m.d)("/login"));case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),t(v(e.t0.message)),setTimeout((function(){t(y())}),300),t(E());case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()}function E(){return{type:u.e}}function v(e){return function(t){t({type:u.h,payload:e}),setTimeout((function(){t(y())}),3e3)}}function y(){return{type:u.d,payload:null}}function g(e){return{type:u.f,payload:e}}function O(e){return{type:u.j,sortType:e}}}},[[118,1,2]]]);
//# sourceMappingURL=main.30417d17.chunk.js.map